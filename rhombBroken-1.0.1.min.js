(function(d){function a(e,f,g){f=f||{};e.onload=function(){var r=f.dWidth>25?10:(f.dWidth||10),m=f.dHeight>25?10:(f.dHeight||10),q=e.width/r,p=e.height/m,h=r+2,t=m+2,w=r-f.offset?(f.offset>10?10:f.offset):8,u=m-f.offset?(f.offset>10?10:f.offset):8,s=[],k=document.createElement("div");for(var o=-1;o<=t;o++){var l=[];for(var n=-1;n<=h;n++){var v=[n*(q+Math.random()*q/w-q/(2*w))-q/2,o*(p+Math.random()*p/u-p/(2*u))-p/2];l.push(v)}s.push(l)}k.style.position="absolute";k.style.top=c(e)+"px";k.style.left=b(e)+"px";document.getElementsByTagName("body")[0].appendChild(k);e.onclick=function(y){e.onclick=function(){};var G=y||d.event;e.style.opacity=0;for(var D=0;D<s.length-2;D++){var F=D%2?2:1;for(var E=F;E<s[D].length-1;E+=2){var z=s[D][E][1],x=s[D+2][E][1],H=s[D+1][E-1][0],C=s[D+1][E+1][0];if(z>e.height){continue}var A=document.createElement("canvas");var J=A.getContext("2d");A.width=e.width;A.height=e.height;J.drawImage(e,0,0);J.globalCompositeOperation="destination-in";J.save();J.beginPath();J.moveTo(s[D][E][0],z);J.lineTo(H,s[D+1][E-1][1]);J.lineTo(s[D+2][E][0],x);J.lineTo(C,s[D+1][E+1][1]);J.closePath();J.fill();J.restore();var I=document.createElement("canvas");var B=I.getContext("2d");f.time=f.time>2?2:(f.time<0?1:f.time||1);I.width=C-H;I.height=x-z;B.drawImage(A,-H,-z);I.style.left=H+"px";I.style.top=z+"px";I.style.position="absolute";I.style.transition="all "+f.time+"s";k.appendChild(I);(function(j,K,i){setTimeout(function(){var L=f.flyOffset||1500;j.style.transform="scale(2) rotateX("+f.rotate||360+"deg)";if(K>G.offsetX){j.style.left=K+Math.random()*L+"px"}else{j.style.left=K-Math.random()*L+"px"}if(i>G.offsetY){j.style.top=i+Math.random()*L+"px"}else{j.style.top=i-Math.random()*L+"px"}j.style.opacity=0},1)})(I,H,z,G)}}setTimeout(function(){k.parentNode.removeChild(k);if(g){g(e)}},f.time*1000+1000)}}}function c(f){var e=f.offsetTop||0;return e+(f.parentNode!==null?c(f.parentNode):0)}function b(f){var e=f.offsetLeft||0;return e+(f.parentNode!==null?b(f.parentNode):0)}d.rhombBroken=a})(window);
